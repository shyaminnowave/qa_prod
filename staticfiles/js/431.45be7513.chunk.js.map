{"version":3,"file":"static/js/431.45be7513.chunk.js","mappings":"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","sources":["component/ProfilePage/Profile.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./Profile.scss\";\nimport { MdEdit } from \"react-icons/md\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getUserList } from \"../../Redux/UserList/UserList\";\nimport {\n  getListOfPermissions,\n  getListofRoles,\n} from \"../../Redux/Roleandpermissionreducer/RoleAndPermissionReducer\";\nimport axiosWithAuth from \"../../utils/axiosClienttok\";\nimport { getProfile } from \"../../Redux/ProfileReducer/ProfileReducer\";\n\nfunction Profile() {\n  const currUser = localStorage.getItem(\"username\");\n \n  const profile = useSelector((state) => state.ProfileReducer.profile);\n  console.log(profile);\n\n  const dispatch = useDispatch();\n  const userList = useSelector((state) => state.UserList.list);\n  const roles = useSelector((state) => state.RoleAndPermissionReducer.roles);\n  const navigate = useNavigate();\n  const filterUserList = userList?.filter((user) => user.username !== currUser);\n \n\n  useEffect(() => {\n    dispatch(getUserList());\n    dispatch(getListofRoles());\n    // dispatch(getListOfPermissions());\n    dispatch(getProfile(currUser));\n  }, []);\n\n  const [open, setOpen] = useState(null);\n  const [selectedRole, setSelectedRole] = useState([]); // State to hold selected role\n\n  const handleSelect = (e) => {\n    setSelectedRole([e.target.value]);\n  };\n  async function handleUpdateRole(e) {\n    e.preventDefault();\n\n    try {\n      const response = await axiosWithAuth.patch(\n        `/user-update/${open?.item?.username}/`,\n        { groups: selectedRole }\n      );\n  \n    } catch (error) {\n      console.log(error);\n    } finally {\n      dispatch(getUserList());\n      dispatch(getProfile(currUser));\n      setSelectedRole([]);\n      setOpen(\"\");\n    }\n  }\n  return (\n    <div className=\"profile\">\n      <div className=\"inner_profile\">\n        <div className=\"profile_info\">\n          <div className=\"name\">\n            <h4>Name :</h4>\n            <h4 className=\"value\"> {profile?.data?.fullname}</h4>\n          </div>\n          <div className=\"role\">\n            <h4>Role :</h4>\n            <h4 className=\"value\">{profile?.data?.groups}</h4>\n          </div>\n          {/* <div className=\"job_profile\">\n            <h4>Profile :</h4>\n            <h4>Senior tester</h4>\n          </div> */}\n          {profile?.data?.groups === \"Admin\" && (\n            <div className=\"role_button\">\n              <button\n                className=\"role_management_button\"\n                onClick={() => navigate(\"/role-management\")}\n              >\n                Role management\n              </button>\n            </div>\n          )}\n        </div>\n        {profile?.data?.groups === \"Admin\" && (\n          <div className=\"user_heading\">\n            <h4>Users and Roles</h4>\n          </div>\n        )}\n        {profile?.data?.groups === \"Admin\" && (\n          <div className=\"list_of_user_and_role\">\n            <table border={1}>\n              <tbody>\n                <tr className=\"column_name\">\n                  <th>Id</th>\n                  <th>Name</th>\n                  <th>Role</th>\n                </tr>\n\n                {filterUserList?.map((item, index) => (\n                  <tr className=\"column_value\" key={index}>\n                    <th>{index + 1}</th>\n                    <th>{item?.fullname}</th>\n                    <th>\n                      {item?.groups}{\" \"}\n                      <MdEdit\n                        onClick={() => setOpen({ item, index })}\n                        className=\"edit\"\n                      />\n                    </th>\n                    {open?.index === index && (\n                      <th>\n                        <div className=\"dropdown\">\n                          <select value={selectedRole} onChange={handleSelect}>\n                            {roles?.map((item) => (\n                              <option key={item?.id} value={item?.id}>\n                                {item?.name}\n                              </option>\n                            ))}\n                          </select>\n\n                          <button onClick={handleUpdateRole}>Update</button>\n                        </div>\n                      </th>\n                    )}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Profile;\n"],"names":["_profile$data","_profile$data2","_profile$data3","_profile$data4","_profile$data5","currUser","localStorage","getItem","profile","useSelector","state","ProfileReducer","console","log","dispatch","useDispatch","userList","UserList","list","roles","RoleAndPermissionReducer","navigate","useNavigate","filterUserList","filter","user","username","useEffect","getUserList","getListofRoles","getProfile","open","setOpen","useState","selectedRole","setSelectedRole","handleSelect","e","target","value","async","handleUpdateRole","preventDefault","_open$item","axiosWithAuth","patch","concat","item","groups","error","_jsx","className","children","_jsxs","data","fullname","onClick","border","map","index","MdEdit","onChange","id","name"],"sourceRoot":""}